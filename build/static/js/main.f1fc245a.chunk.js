(this.webpackJsonpcityquestweb=this.webpackJsonpcityquestweb||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n.n(c),r=n(21),i=n.n(r),o=n(7),s=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function u(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,82)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))},j=n(31);j.a.apps.length||j.a.initializeApp({apiKey:"AIzaSyBUHmNHlurXkvkvxVfKfHeK-nyfMSpb-uA",authDomain:"city-quest-native.firebaseapp.com",projectId:"city-quest-native",storageBucket:"city-quest-native.appspot.com",messagingSenderId:"1047619952176",appId:"1:1047619952176:web:448dc5d4564c17613d17f5",measurementId:"G-G8KHGP2Y5Q"});var b=j.a,O=n(34),f=n(35),d=n(40),p=n(39),m=n(3),h=function(e){Object(d.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(O.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(f.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(m.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(c.Component),v=n(6),g=n(19),x=n(11),y=n.n(x),k=n(16),N=b.firestore(),w=function(e){return{playerId:e.uid,playerDisplayName:e.displayName||"Anonymous",playerEmail:e.email||"---"}};function _(){return(_=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.auth().onAuthStateChanged((function(e){t(null!==e?w(e):null)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E,A,C=function(){var e=Object(k.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new b.auth.GoogleAuthProvider,e.next=3,b.auth().signInWithPopup(t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.auth().signOut();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(k.a)(y.a.mark((function e(t,n){var c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.collection("users").doc(t).get();case 2:return e.next=4,e.sent.data();case 4:c=e.sent,n({playerData:null===c||void 0===c?void 0:c.playerData,lastGameState:null===c||void 0===c?void 0:c.lastGameState});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(k.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.collection("users").doc(t).get();case 2:return e.next=4,e.sent.data();case 4:if(!(n=e.sent)){e.next=7;break}return e.abrupt("return",n);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(k.a)(y.a.mark((function e(t,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.collection("users").doc(n).update({lastGameState:Object(g.a)({},t)});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=n(81);!function(e){e[e.AUTH=0]="AUTH",e[e.GAME=1]="GAME",e[e.MENU=2]="MENU"}(E||(E={})),function(e){e[e.NONE=0]="NONE",e[e.NEW=1]="NEW",e[e.SAVED=2]="SAVED"}(A||(A={}));var T=Object(o.b)(null),U=Object(o.b)(null),W=Object(o.b)(E.AUTH),H=Object(o.b)(A.NEW),B=Object(o.b)(!1),L=Object(o.b)(!1),q=Object(o.b)(""),F=Object(o.b)(0),P=(Object(o.b)(0),Object(o.b)(100)),R=Object(o.b)(100),V=Object(o.b)([0,0]),K=Object(o.b)([{id:"1",name:"Museum Hours",type:"Clue"}]),z=Object(o.b)(null,function(){var e=Object(k.a)(y.a.mark((function e(t,n){var c,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(c=t(U))){e.next=6;break}return e.next=4,G(c.playerData.playerId);case 4:(a=e.sent)&&(r=a.lastGameState,n(q,r.gameId),n(F,r.gameStartTime),n(V,r.playerLocation),n(P,r.playerEnergy),n(R,r.playerScore),n(K,r.playerItems));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Q=Object(o.b)(null,(function(e,t){t(q,Object(I.a)()),t(F,Date.now()),t(V,[0,0]),t(P,100),t(R,100),t(K,[{id:"1",name:"Museum Hours",type:"Clue"}])})),J=Object(o.b)({},(function(e,t){var n=e(T),c={gameId:e(q),gameStartTime:e(F),playerLocation:e(V),playerEnergy:e(P),playerScore:e(R),playerItems:e(K)};n&&M(c,n.playerId)})),Y=Object(o.b)(!1,(function(e,t){t(Y,!0)})),X=Object(o.b)(null,(function(e,t){t(T,null),t(U,null),t(H,A.NEW),t(B,!1),t(W,E.AUTH),S()})),$=Object(o.b)(null,(function(e,t){t(H,A.NEW),t(B,!1),t(L,!1),t(W,E.GAME)})),Z=Object(o.b)(null,(function(e,t){t(H,A.SAVED),t(B,!1),t(L,!1),t(W,E.GAME)})),ee=Object(o.b)({letter:"A",color:"green"},(function(e,t){var n=e(R);switch(void 0===n&&(n=100),!0){case n<=15:t(ee,{letter:"F",color:"red"});break;case n>15&&n<=30:t(ee,{letter:"E",color:"gold"});break;case n>30&&n<=50:t(ee,{letter:"D",color:"orange"});break;case n>50&&n<=70:t(ee,{letter:"C",color:"lightorange"});break;case n>70&&n<=90:t(ee,{letter:"B",color:"yellow"});break;default:t(ee,{letter:"A",color:"green"})}}));var te=n(13),ne=n(18);function ce(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";return Object.keys(e).reduce((function(c,a){var r=e[a],i=[t,a].filter(Boolean).join(n);return["object"===typeof r,null!==r,!(r instanceof Date),!(r instanceof RegExp),!(Array.isArray(r)&&0===r.length)].every(Boolean)?Object(g.a)(Object(g.a)({},c),ce(r,i,n)):Object(g.a)(Object(g.a)({},c),{},Object(ne.a)({},i,r))}),{})}n(50);var ae=function(){var e=Object(o.c)(B),t=Object(v.a)(e,2),n=t[0],c=t[1],a=Object(o.c)(J),r=Object(v.a)(a,1)[0],i=Object(o.c)(T),s=Object(v.a)(i,1)[0],u=Object(o.c)(U),l=Object(v.a)(u,1)[0],j=function(e){var t=ce(e);return Object.entries(t).map((function(e,t){var n=Object(v.a)(e,2),c=n[0],a=n[1];return Object(m.jsx)("li",{className:"configmenu__li",children:"".concat(c," ==> ").concat(a)},t)}))};return Object(m.jsxs)("div",{className:"configmenu",children:[Object(m.jsx)(te.a,{variant:"dark",onClick:function(){return c(!n)},children:"Toggle Debug Menu"}),Object(m.jsxs)("ul",{className:"configmenu__ul",children:[j(s),j(l),j(r)]})]})},re=(n(51),function(){var e=Object(o.c)(B),t=Object(v.a)(e,2),n=t[0],c=t[1],a=Object(o.c)(T),r=Object(v.a)(a,1)[0],i=Object(o.c)(J),s=Object(v.a)(i,2)[1],u=Object(o.c)(W),l=Object(v.a)(u,2)[1],j=Object(o.c)(X),b=Object(v.a)(j,2)[1];return Object(m.jsxs)("div",{className:"ingamemenu",children:[n&&Object(m.jsx)(ae,{}),Object(m.jsxs)("p",{className:"ingamemenu__heading",children:["Current Player: ",null===r||void 0===r?void 0:r.playerDisplayName]}),Object(m.jsx)(te.a,{variant:"dark",onClick:function(){return b()},className:"ingamemenu__btn",children:"Sign Out"}),Object(m.jsx)(te.a,{variant:"dark",onClick:function(){l(E.MENU)},className:"ingamemenu__btn",children:"Main Menu"}),Object(m.jsx)(te.a,{variant:"dark",onClick:function(){return s()},className:"ingamemenu__btn",children:"Save Game"}),Object(m.jsx)(te.a,{variant:"dark",onClick:function(){return c(!n)},className:"ingamemenu__btn",children:"Show Config Menu"})]})}),ie=(n(52),function(){var e=Object(o.c)(P),t=Object(v.a)(e,1)[0];return Object(m.jsx)("div",{className:"energylevel",children:Object(m.jsx)("div",{className:"energylevel__bar",style:{backgroundColor:function(){if(t)return t<=15?"red":t>15&&t<=45?"orange":t>45&&t<=75?"yellow":"green"}(),width:"".concat(t,"px")}})})}),oe=(n(53),function(){var e=Object(o.c)(ee),t=Object(v.a)(e,1)[0];return Object(m.jsx)("div",{className:"grade",children:Object(m.jsx)("span",{className:"grade__letter",style:{color:t.color},children:t.letter})})}),se=n(37),ue=n.n(se);n(54);var le=function(){var e=Object(o.c)(L),t=Object(v.a)(e,2),n=t[0],a=t[1],r=Object(o.c)(H),i=Object(v.a)(r,1)[0],s=Object(o.c)(z),u=Object(v.a)(s,2)[1],l=Object(o.c)(Q),j=Object(v.a)(l,2)[1],b=Object(o.c)(B),O=Object(v.a)(b,2)[1],f=Object(o.c)(P),d=Object(v.a)(f,2),p=d[0],h=d[1],g=Object(c.useRef)(u),x=Object(c.useRef)(j);return Object(c.useEffect)((function(){i===A.SAVED&&g.current(),i===A.NEW&&x.current()}),[i]),Object(m.jsxs)("main",{className:"game",children:[Object(m.jsx)(ue.a,{className:"game__modal-icon",onClick:function(){a(!n),O(!1)}}),n&&Object(m.jsx)(re,{}),Object(m.jsxs)("section",{className:"game__hud",children:[Object(m.jsx)(ie,{}),Object(m.jsx)(oe,{})]}),Object(m.jsx)("section",{className:"game__media"}),Object(m.jsx)("section",{className:"game__info"}),Object(m.jsxs)("section",{className:"game__map",children:[Object(m.jsx)("button",{type:"button",onClick:function(){return h(100===p?100:(p||100)+1)},children:"Increase Energy"}),Object(m.jsx)("button",{type:"button",onClick:function(){return h(0===p?0:(p||100)-1)},children:"Decrease Energy"})]})]})};var je=function(){var e=Object(o.c)(W),t=Object(v.a)(e,2),n=t[0],c=t[1],a=Object(o.c)(H),r=Object(v.a)(a,2)[1],i=Object(o.c)(L),s=Object(v.a)(i,2)[1],u=Object(o.c)(B),l=Object(v.a)(u,2)[1],j=Object(o.c)(X),b=Object(v.a)(j,2)[1],O=Object(o.c)($),f=Object(v.a)(O,2)[1],d=Object(o.c)(Z),p=Object(v.a)(d,2)[1];return Object(m.jsxs)("main",{className:"menu",children:[Object(m.jsx)("h1",{className:"menu__title",children:"City Quest"}),Object(m.jsxs)("div",{children:[n===E.MENU&&Object(m.jsx)(te.a,{variant:"dark",className:"menu__btn",onClick:function(){l(!1),s(!1),r(A.NONE),c(E.GAME)},children:"Back to Gameplay"}),Object(m.jsx)(te.a,{variant:"dark",className:"menu__btn",onClick:function(){return f()},children:"New Game"}),Object(m.jsx)(te.a,{variant:"dark",className:"menu__btn",onClick:function(){return p()},children:"Load Last Game"}),Object(m.jsx)(te.a,{variant:"dark",className:"menu__btn",onClick:function(){console.log("https://console.firebase.google.com/u/0/project/city-quest-native/overview")},children:"Learn"}),Object(m.jsx)(te.a,{variant:"dark",className:"menu__btn",onClick:function(){return b()},children:"Sign Out"})]})]})};function be(){var e=Object(o.c)(U),t=Object(v.a)(e,1)[0],n=Object(o.c)(W),c=Object(v.a)(n,1)[0],a=Object(o.c)(H),r=Object(v.a)(a,2)[1];return c===E.AUTH?(null===t||void 0===t?void 0:t.playerData.skipMenu)?(r(A.SAVED),Object(m.jsx)(le,{})):Object(m.jsx)(je,{}):c===E.GAME?Object(m.jsx)(le,{}):Object(m.jsx)(je,{})}var Oe=function(e){var t=e.className,n=e.sizeAndUnit;return Object(m.jsx)("div",{className:"spacer ".concat(t),style:{height:n||"1rem"}})};n(63);var fe=function(){return Object(m.jsxs)("main",{className:"auth",children:[Object(m.jsx)("h1",{className:"auth__title",children:"You must authenticate."}),Object(m.jsx)(Oe,{}),Object(m.jsx)(te.a,{variant:"dark",className:"auth__btn",onClick:function(){return C()},children:"Authenticate with Google"})]})},de=n(30),pe=(n(64),function(){return Object(m.jsx)("main",{className:"splash",children:Object(m.jsxs)("div",{className:"splash__spinnergrp",children:[Object(m.jsx)(de.a,{animation:"grow",className:"splash__spinnergrp-spinner"}),Object(m.jsx)(de.a,{animation:"grow",className:"splash__spinnergrp-spinner"}),Object(m.jsx)(de.a,{animation:"grow",className:"splash__spinnergrp-spinner"})]})})});function me(){var e=Object(o.c)(T),t=Object(v.a)(e,2),n=t[0],a=t[1],r=Object(o.c)(U),i=Object(v.a)(r,2),s=i[0],u=i[1],l=Object(c.useRef)(a);Object(c.useEffect)((function(){!function(e){_.apply(this,arguments)}(l.current)}),[]);var j=Object(c.useRef)(u);return Object(c.useEffect)((function(){n&&D(n.playerId,j.current)}),[n]),n?n&&s?Object(m.jsx)(be,{}):Object(m.jsx)(pe,{}):Object(m.jsx)(fe,{})}n(65),n(66);var he=b.analytics();i.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(h,{children:Object(m.jsx)(o.a,{children:Object(m.jsx)(c.Suspense,{fallback:Object(m.jsx)(pe,{}),children:Object(m.jsx)(me,{})})})})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");s?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):u(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):u(e)}))}}(),l(he.logEvent)}},[[68,1,2]]]);
//# sourceMappingURL=main.f1fc245a.chunk.js.map